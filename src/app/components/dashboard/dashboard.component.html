<div class="dashboard-container">
  <!-- Header -->
  <header class="dashboard-header">
    <div class="header-content">
      <div class="logo-section">
        <h1>SimpleHR</h1>
        @if (currentUser()) {
          <span class="company-info">
            Firma ID: {{ currentUser()?.companyId }}
          </span>
        }
      </div>
      
      <div class="user-section">
        @if (currentUser()) {
          <div class="user-info">
            <div class="user-avatar">
              {{ currentUser()?.firstName?.charAt(0) }}{{ currentUser()?.lastName?.charAt(0) }}
            </div>
            <div class="user-details">
              <span class="user-name">{{ currentUser()?.firstName }} {{ currentUser()?.lastName }}</span>
              <span class="user-username">{{ currentUser()?.username }}</span>
              <div class="user-roles">
                @for (role of currentUser()?.roles; track role) {
                  <span class="role-badge">{{ role }}</span>
                }
              </div>
            </div>
          </div>
        }

        <button class="btn btn-outline logout-btn" (click)="logout()">
          Wyloguj
        </button>
      </div>
    </div>
  </header>
  <!-- Main Content -->
  <div class="dashboard-main">
    <!-- Sidebar Navigation -->
    <aside class="dashboard-sidebar">
      <nav class="sidebar-nav">
        <div class="nav-section">
          <h3>Menu główne</h3>
          <ul class="nav-list">
            <li>
              <button 
                class="nav-item"
                (click)="navigateTo('/dashboard')"
              >
                <span class="nav-icon">🏠</span>
                Dashboard
              </button>
            </li>
          </ul>
        </div>

        <div class="nav-section">
          <h3>Grafiki pracy</h3>
          <ul class="nav-list">
            <li>
              <button 
                class="nav-item"
                (click)="navigateTo('/schedules/search')"
              >
                <span class="nav-icon">📅</span>
                Lista grafików
              </button>
            </li>
            @if (canManageSchedules()) {
              <li>
                <button 
                  class="nav-item"
                  (click)="navigateTo('/schedules/create')"
                >
                  <span class="nav-icon">➕</span>
                  Nowy grafik
                </button>
              </li>
            }
            <li>
              <button 
                class="nav-item"
                (click)="navigateTo('/schedules/published')"
              >
                <span class="nav-icon">📋</span>
                Opublikowane
              </button>
            </li>
          </ul>
        </div>

        <div class="nav-section">
          <h3>Wnioski urlopowe</h3>
          <ul class="nav-list">
            <li>
              <button 
                class="nav-item"
                (click)="navigateTo('/leave-requests')"
              >
                <span class="nav-icon">🏖️</span>
                Moje wnioski
              </button>
            </li>
            <li>
              <button 
                class="nav-item"
                (click)="navigateTo('/leave-requests/create')"
              >
                <span class="nav-icon">➕</span>
                Nowy wniosek
              </button>
            </li>
    
              <li>
              <button 
                class="nav-item"
                (click)="navigateTo('/leave-requests/search')"
              >
                <span class="nav-icon">📋</span>
                 Lista wniosków
              </button>
            </li>
          </ul>
        </div>


        <div class="nav-section">
          <h3>Ewidencja pracy</h3>
          <ul class="nav-list">
            <li>
              <button 
                class="nav-item"
                (click)="navigateTo('/work-time-records')"
              >
                <span class="nav-icon">🗂️</span>
                List ewidencji
              </button>
            </li>
            <li>
              <button 
                class="nav-item"
                (click)="navigateTo('/work-time/annexes')"
              >
                <span class="nav-icon">📝</span>
                Lista aneksów
              </button>
            </li>
          </ul>
        </div>
        

        @if (canManageSystem()) {
          <div class="nav-section">
            <h3>Administracja</h3>
            <ul class="nav-list">
              <li>
                <button 
                  class="nav-item"
                  (click)="navigateTo('/admin')"
                >
                  <span class="nav-icon">🔧</span>
                  Panel Administratora
                </button>
              </li>
              <li>
              <button 
                class="nav-item"
                (click)="navigateTo('/account')"
              >
                <span class="nav-icon">👤</span>
                Moje konto
              </button>
              <button 
                class="nav-item"
                (click)="navigateTo('/admin/emails')"
              >
                <span class="nav-icon">👤</span>
                Poczta
              </button>
            </li>
            </ul>
          </div>
      }
      
      </nav>
    </aside>

    <!-- Content Area -->
    <main class="dashboard-content">
      <div class="content-header">
        <h2>Witaj w systemie SimpleHR!</h2>
        <p>Tu znajdziesz kluczowe informacje o swoich grafikach, urlopach i danych.</p>
      </div>

      <!-- Quick Stats Cards -->
      <div class="stats-grid">
        <div class="stat-card clickable" (click)="goToCurrentSchedule()">
          <div class="stat-icon">📅</div>
          <div class="stat-content">
            <h3>Aktualny grafik</h3>
          </div>
        </div>

        <div class="stat-card clickable" (click)="goToLeaveHub()">
          <div class="stat-icon">🏖️</div>
          <div class="stat-content">
            <h3>Moje urlopy</h3>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon">👥</div>
          <div class="stat-content">
            <h3>Moje dane</h3>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon">📊</div>
          <div class="stat-content">
            <h3>Raporty</h3>
          </div>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="quick-actions">
        <h3>Wnioski do obsługi</h3>
        @if (pendingLoading()) {
          <div class="requests-placeholder">Ładuję wnioski wymagające Twojej uwagi...</div>
        } @else if (pendingError()) {
          <div class="requests-error">{{ pendingError() }}</div>
        } @else if (!pendingRequests().length) {
          <div class="requests-empty">Brak wniosków wymagających akcji.</div>
        } @else {
          <div class="actions-grid pending-grid">
            @for (req of pendingRequests(); track req.id) {
              <a class="pending-card" [routerLink]="requestLink(req.id)">
                <div class="pending-card-header">
                  <span class="pending-type">{{ leaveTypeLabel(req.leaveType) }}</span>
                  <span class="pending-status">{{ statusLabel(req.status) }}</span>
                </div>
                <div class="pending-dates">
                  {{ formatDate(req.startDate) }} → {{ formatDate(req.endDate) }}
                </div>
                <div class="pending-meta">
                  @if (canReviewRequests()) {
                    <span class="pending-owner">{{ req.userName }}</span>
                  }
                  <span class="pending-submitted">Złożono: {{ req.submittedAt ? formatDate(req.submittedAt.slice(0, 10)) : '-' }}</span>
                </div>
                <div class="pending-footer">Przejdź do szczegółów →</div>
              </a>
            }
          </div>
        }
      </div>
    </main>
  </div>
</div>